
/******Test endpoint *********/
https://gist.githubusercontent.com/SidneyAllen/bd390d5599117d7141e2e479f02d9957/raw/89e91a9484cf3451ac0da11cd752cb8b6cb96d64/openapi-array-of-objects.json



/*******************************************/
/**************Overloads the data state to be optimized****************/
useEffect(() => {
  const fetchData = async () => {
    try {
      let fetchedData = [];
      if (url) {
        const response = await axios.get(url);
        fetchedData = response.data;
      } else {
        const libData = await fetchData();
        setData(libData);
        //setFilteredData(fetchedData);
      }
      setData(fetchedData);
    } catch (error) {
      console.log('Fetch Error', error);
    }
  };

  fetchData();
}, [url]);

/**************************************************/
/**************************************************/
/**************************************************/



/*************Fetches Url Data replaced with the one that fetches both local and url data*******///

		useEffect(() => {
      const fetchData = async () => {
        if (url) {
          // Fetch data from external URL
          const urlSearch = await axios.get(url);
          setUrlData(urlSearch.data);
        }
        if (localFilePath) {
          // Fetch data from local JSON file
          const localFileSearch = await axios.get(`file://${localFilePath}`);
          setLocalFileData(localFileSearch.data);
        }
      };
    
      // Call fetchData when either url or localFilePath changes
      fetchData();
    }, [url, localFilePath]);


/**************************************************/
/**************************************************/
/******************Title section********************************/
<section className="text-gray-600 body-font">
        <div className="container px-5 py-5 mx-auto">
          <div className="flex flex-col text-center w-full">
            <h1 
              id='header'
              className="sm:text-3xl text-2xl font-medium title-font mb-4 text-gray-900">Alpha Vantage Income Statement
            </h1>
          </div>
        </div>
      </section>


/************************************************//
/************************************************//
/************************************************//
    this is my listener file # listener.ora Network Configuration File: D:\Oracle\homes\OraDB21Home1\NETWORK\ADMIN\listener.ora
# Generated by Oracle configuration tools.

SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = CLRExtProc)
      (ORACLE_HOME = D:\WINDOWS.X64_213000_db_home)
      (PROGRAM = extproc)
      (ENVS = "EXTPROC_DLLS=ONLY:D:\WINDOWS.X64_213000_db_home\bin\oraclr.dll")
    )
  )

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = TCP)(HOST = host.docker.internal)(PORT = 1521))
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
    )
  )

  /************************************************//
  /************************************************//
  /************************************************//




  this is my ora file # tnsnames.ora Network Configuration File: D:\Oracle\homes\OraDB21Home1\NETWORK\ADMIN\tnsnames.ora
# Generated by Oracle configuration tools.

LISTENER_ORCL =
  (ADDRESS = (PROTOCOL = TCP)(HOST = host.docker.internal)(PORT = 1521))


ORACLR_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
    )
    (CONNECT_DATA =
      (SID = CLRExtProc)
      (PRESENTATION = RO)
    )
  )

ORCL =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = host.docker.internal)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl.docker.internal)
    )
  )


/************************************************//
  /************************************************//

  const handleDownloadPDF = () => {
    const doc = new jsPDF();
    const table = document.getElementById('income_table');
    const footerInput = document.getElementById('footer');

    if (!footerInput) {
        console.error('Footer input not found');
        return;
    }

    const footerText = footerInput.value || '';

    const addHeaderAndFooter = () => {
        const pageWidth = doc.internal.pageSize.width;

        // Logo (to the left)
        const logoImage = document.getElementById('file-upload');

        if (logoImage && logoImage.files && logoImage.files[0]) {
            const reader = new FileReader();
            reader.onload = () => {
                const logoDataURL = reader.result;
                doc.addImage(logoDataURL, 'PNG', 15, 15, 50, 50); // Adjust dimensions and positions as needed
            };
            reader.readAsDataURL(logoImage.files[0]);
        }

        // Title (centered)
        const titleInput = document.getElementById('header');

        if (!titleInput) {
            console.error('Title input not found');
            return;
        }

        const titleText = titleInput.value || '';

        doc.setFontSize(16);
        const titleWidth = doc.getStringUnitWidth(titleText) * doc.internal.getFontSize();
        const titleX = (pageWidth - titleWidth) / 2;
        doc.text(titleText, titleX, 30); // Adjust position as needed

        // Address (to the right)
        const addressInput = document.getElementById('address');

        if (!addressInput) {
            console.error('Address input not found');
            return;
        }

        const addressText = addressInput.value || '';

        doc.setFontSize(12);
        const addressWidth = doc.getStringUnitWidth(addressText) * doc.internal.getFontSize();
        const addressX = pageWidth - addressWidth - 15;
        doc.text(addressText, addressX, 45); // Adjust position as needed

        // Footer (centered)
        doc.setFontSize(10);
        const pageHeight = doc.internal.pageSize.height;
        const footerWidth = doc.getStringUnitWidth(footerText) * doc.internal.getFontSize();
        const footerX = (pageWidth - footerWidth) / 2;
        doc.text(footerText, footerX, pageHeight - 10); // Adjust position as needed
    };

    const startY = 70; // Adjust as needed

    const headers = [];
    Array.from(table?.querySelectorAll('thead th')).forEach(headerCell => {
        headers.push(headerCell.textContent?.trim());
    });

    const tableData = [];
    Array.from(table.querySelectorAll('tbody tr')).forEach(row => {
        const rowData = [];
        Array.from(row.cells).forEach(cell => {
            rowData.push(cell.textContent.trim());
        });
        tableData.push(rowData);
    });

    doc.autoTable({
        head: [headers],
        body: tableData,
        startY: startY,
        didDrawPage: addHeaderAndFooter
    });

    doc.save('header.pdf');
};
